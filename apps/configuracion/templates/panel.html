{% extends 'base_admin.html' %}
{% block title %}Panel de Control | WebClinic{% endblock title %}


{% block head %}
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
{% endblock head %}
    

{% block style %}
<style>
    body {
        background-color: #f5f5f5;
    }
    .card {
        border-radius: 10px;
    }
    .chart-container {
        width: 100%;
        height: 400px;
    }
    .dashboard-header {
        margin-bottom: 20px;
    }
    .card-title {
        font-weight: bold;
    }
</style>
{% endblock style %}
    

{% block content %}
<div class="container my-4">
    <div class="dashboard-header text-center">
        <h2>Medical Dashboard</h2>
        <p>Overview of appointments, payments, patients, and exams</p>
    </div>

    <!-- Row 1: Statistics -->
    <div class="row">
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>1,200</h3>
                    <p class="card-title">Total Patients</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>850</h3>
                    <p class="card-title">Total Appointments</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>300</h3>
                    <p class="card-title">Pending Payments</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>900</h3>
                    <p class="card-title">Completed Payments</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>450</h3>
                    <p class="card-title">Internal Exams</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card text-center">
                <div class="card-body">
                    <h3>300</h3>
                    <p class="card-title">External Exams</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 2: Charts -->
    <div class="row my-4">
        <!-- Appointments by Month -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="appointmentsChart"></canvas>
                </div>
            </div>
        </div>
        <!-- Exams Distribution -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="examsChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 3: Additional Charts -->
    <div class="row my-4">
        <!-- Appointment Status -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>
        </div>
        <!-- Payment Status -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="paymentChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block script %}
<script>
    // Appointments by Month
    const ctx1 = document.getElementById('appointmentsChart').getContext('2d');
    const appointmentsChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            datasets: [{
                label: 'Appointments',
                data: [80, 100, 95, 120, 85, 90, 110, 105, 120, 130, 140, 150],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2,
                fill: true
            }]
        }
    });

    // Exams Distribution (Internal vs External)
    const ctx2 = document.getElementById('examsChart').getContext('2d');
    const examsChart = new Chart(ctx2, {
        type: 'doughnut',
        data: {
            labels: ['Internal Exams', 'External Exams'],
            datasets: [{
                data: [450, 300],
                backgroundColor: ['#36A2EB', '#FF6384']
            }]
        }
    });

    // Appointment Status
    const ctx3 = document.getElementById('statusChart').getContext('2d');
    const statusChart = new Chart(ctx3, {
        type: 'bar',
        data: {
            labels: ['Pending', 'Completed', 'Cancelled'],
            datasets: [{
                label: 'Appointments',
                data: [60, 700, 90],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
            }]
        }
    });

    // Payment Status
    const ctx4 = document.getElementById('paymentChart').getContext('2d');
    const paymentChart = new Chart(ctx4, {
        type: 'pie',
        data: {
            labels: ['Paid', 'Unpaid', 'Pending'],
            datasets: [{
                data: [900, 150, 50],
                backgroundColor: ['#4BC0C0', '#FF6384', '#FFCE56']
            }]
        }
    });
</script>
{% endblock script %}
    